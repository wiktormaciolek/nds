// Copyright (c) 2015-present, salesforce.com, inc. All rights reserved
// Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license

/**
 * @summary Initializes text input
 *
 * @name base
 * @selector .nds-knowledge-block
 * @restrict div
 * @required
 * @variant
 */
@if & {

  // stylelint-disable-next-line selector-class-pattern
  .iframeresizer--child & .nds-knowledge-block {
    position: absolute;

    .nds-right_panel {
      height: auto;
    }
  }
}

@else {

  // stylelint-disable-next-line selector-class-pattern
  .iframeresizer--child .nds-knowledge-block {
    position: absolute;

    .nds-right_panel {
      height: auto;
    }
  }
}


.nds-knowledge-block {
  position: fixed;
  top: 8.625rem;
  #{$right}: 0;
  width: 30%;
  bottom: 0;
  
  .nds-knowledge-component.nds-knowledge-component_container {
    #{$right}: .9rem;
  }

  .nds-right_panel {
    height: 100%;

    div.nds-col {
      height: 100%;
    }
  }

  .nds-lookup.nds-knowledge-component {
    height: 100%;

    >button.nds-knowledge-expand,
    >label.nds-form-element__label {
      font-size: 0.875rem;
      margin-bottom: 1rem;
      position: absolute;
      transform: rotate(270deg);
      border: 1px solid $color-grey-shaded;
      #{$right}: -3.75rem;
      padding: 0.3125rem 0.9375rem;
      margin: 0;
      top: 6.25rem;
      width: 150px;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      cursor: pointer;
      text-align: center;
      background: $white;
    }

    .nds-input-has-icon_left {

      input#vlcKnowledgeKeyword {
        border-bottom: 0;
        border: 1px solid $color-border-input;
        border-radius: 0.25rem;
        padding-#{$left}: 2rem;
      }

      svg {
        margin-#{$left}: 0.5rem;
        opacity: 0.5;
      }
    }

    .nds-knowledge-item {
      min-height: 18rem;
      height: 18rem;
      overflow-y: auto;
      padding-top: 0;
      background: #fff;
      border-top: 0;
      width: 100%;
      margin-right: -1rem;

      .nds-item .nds-knowledge-list-item {

        a.nds-knowledge-item_popup {

          &:focus {
            outline: none;
          }

          svg {
            fill: $color-icon-grey;
            width: 1rem;
            height: 1rem;
            opacity: 1;

            /* stylelint-disable max-nesting-depth */
            &:hover+small {
              display: inline;
            }

            /* stylelint-enable max-nesting-depth */
          }

          small {
            display: none;
            position: absolute;
            top: -0.8rem;
            flex-wrap: wrap;
            #{$right}: -1rem;
            color: $color-light-border;
          }
        }
        
        .nds-knowledge-lastpubdate {
          font-size: 0.8125rem;
        }

        .nds-control-action_container {
          margin-bottom: 0.5rem;
          margin-top: 1rem;
          position: relative;

          .nds-knowledge-item_heading {
            width: 100%;
            color: $color-blue-text-secondary;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 500;

            /* stylelint-disable max-nesting-depth */
            &:hover {
              text-decoration: underline;
            }

            &:focus {
              outline: none;
            }

            /* stylelint-enable max-nesting-depth */
          }
        }

        p {
          overflow: hidden;
          width: 100%;
          min-width: 100%;
          white-space: nowrap;
          text-overflow: ellipsis;
        }
      }

      h3 {
        color: $color-light-border;
        overflow: hidden;
        width: 100%;
        min-width: 100%;
        white-space: nowrap;
        text-overflow: ellipsis;
      }

      li {
        margin-left: 0;
        border-bottom: 1px solid #cfd7e6;
        min-height: 6rem;
        height: 6rem;
        color: #456792;
        padding: 0 5% 0 0;
      }
    }

    .nds-knowledge-data_wrapper {
      position: relative;
      border-#{$left}: 2px solid $color-grey-shaded;
      border-top: 2px solid $color-grey-shaded;
      height: 100%;
      padding: 1.25rem;
      background: $white;

      .nds-knowledge-data_wrapper-search.nds-lookup__search-input {
        input {
          padding-#{$left}: 2rem;
        }
      }

      .nds-knowledge-data_wrapper-search.nds-lookup__input {
        margin-top: 2rem;
      }

      .nds-knowledge-data_wrapper-search {
        position: relative;

        svg {
          fill: $color-icon-grey;
          #{$left}: 0;
        }

        .nds-form-container {
          padding: 0;
        }
      }
    }

    .nds-knowledge-data_cont {
      position: relative;
      display: flex;
      justify-content: space-between;

      svg.nds-input__icon {
        top: 0.75rem;
        #{$right}: 0;
        cursor: pointer;
      }

      h3{
        font-size: 1.125rem
      }
    }

    .nds-form-element__label {
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }
  }
}

.nds-knowledge-block.nds-knowledge-wrapper {
  top: 10.625rem;
}

.nds-knowledge-block.nds-knowledge-wrapper .nds-lookup.nds-knowledge-component .nds-knowledge-item h3.nds-knowledge-desc {
  font-size: 0.875rem;
}

.nds-knowledge-block.nds-knowledge-wrapper .nds-lookup.nds-knowledge-component .nds-knowledge-item h3.nds-knowledge-lastpubdate {
  font-size: 0.8125rem;
}

.nds-knowledge_full-cont-width {
  width: 30%;
}

.nds-knowledge_cont-init-width {
  width: 5%;
}

.nds-modal_knowledge {

  .nds-icon_small {
    position: absolute;
    #{$right}: 1rem;
    fill: $color-blue-font;
    top: 1.5rem;
    width: 1.25rem;
    height: 1.25rem;
  }

  .nds-modal__container {

    .nds-modal__header {
      background-color: $card-color-background;
      color: $color-blue-font;
      border-top-right-radius: 0;
      border-top-left-radius: 0;
      border-bottom: 0;

      // stylelint-disable-next-line selector-class-pattern
      .modal-title {
        font-size: 1.375rem;
        text-align: #{$left};
        font-weight: bold;
      }
    }

    .nds-modal__footer {
      border-top: 0;
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
      background-color: $color-border-tab-active;

      // stylelint-disable-next-line selector-class-pattern
      button.btn-primary {
        background-color: $color-blue-font;
        color: $color-border-tab-active;
        padding: 0.75rem 3.125rem;
        border-radius: 0.1rem;
      }
    }
  }
}

.nds-knowledge-item_heading:focus,
.nds-knowledge-item_heading:active,
.nds-knowledge-item_popup:focus,
.nds-knowledge-item_popup:active {
  @include focus-button;
  z-index: $z-index-default; // Raises box shadow above adjacent buttons
}

.nds-knowledge-item_heading {
  margin: 2px;
}

.nds-knowledge-item_popup {
  padding-right: 8px;
  padding-top: 3px;
}
